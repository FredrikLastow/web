<div class="headline">
  <h2><%= title(group_title(@group_view.group)) %></h2>
</div>

<div class="col-md-3 col-sm-12">
  <div class="headline">
    <h4><%= t('.members') %></h4>
  </div>
  <% cache([I18n.locale, @group_view.group.group_users]) do %>
    <%= render @group_view.group.group_users.includes(:user) %>
  <% end %>

  <% if can?(:edit, @group_view.group) %>
    <%= link_to edit_group_path(@group_view.group) do %>
      <%= fa_icon('cog') %> <%= t('global.edit') %>
    <% end %>
  <% end %>

  <% if can?(:create, Message.new(user: current_user, groups: [@group_view.group])) %>
    <hr>
    <%= link_to(t('.new_message'), new_group_message_path(@group_view.group),
                                   class: 'btn primary') %>
  <% end %>

  <hr>
  <%= link_to(@group.introduction, introduction_path(@group_view.group.introduction),
                                   class: 'btn secondary') %>
  <%= link_to(t('.adventures'), introduction_adventures_path(@group_view.group.introduction),
                                class: 'btn secondary') %>
</div>

<div class="col-md-9 col-sm-12">
  <div class="headline">
    <h3><%= t('.messages') %></h3>
  </div>
  <%= render @group_view.messages %>
  <%= link_to(group_messages_path(@group_view.group)) do %>
    <%= fa_icon('plus') %> <%= t('.all_messages') %>
  <% end %>
</div>

<% if @group_view.adventures.any? %>
  <div class="col-md-12">
    <div class="adventure">
      <div class="headline">
        <h3><%= t('.adventures') %></h3>
      </div>

      <% @group_view.adventures.each do |result| %>
        <%= render(result, title: result.adventure, do_link: true, max: result.adventure.max_points) %>
      <% end %>
    </div>
  </div>
<% end %>
