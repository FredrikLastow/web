<%= simple_form_for(@rent, error_method: :to_sentence) do |f| %>
  <%= f.association :user, collection: [current_user], include_blank: false %>
  <% if @rent.errors[:user].present? %>
    <p><%= link_to(t('user.edit_information'), edit_own_user_path, target: :blank_p) %></p>
  <% end %>
  <%= render 'renter_table', user: @rent.user, rent: @rent %>

  <% if (overlap = @rent.overlap).present? && overlap.count > 0 %>
    <span class='overlapping-date'><%= t('rent.overlaps_with') %></span>
    <ul class='overlapping-date'>
      <% overlap.each do |o| %>
        <li>
          <%= link_to(%(#{o.user} #{o.council} - #{o.p_time}), rent_path(o), target: :blank_p) %>
        </li>
      <% end %>
    </ul>
  <% end %>

  <%= f.input :d_from, as: :datetime_picker, required: true %>
  <%= f.input :d_til, as: :datetime_picker, required: true %>
  <%= f.input :purpose, as: :text, required: true %>

  <% if current_user.car_councils && current_user.car_councils.count > 0 %>
    <strong><%= t('rent.council') %></strong>
    <ul class="list">
      <li><%= t('rent.council_only') %></li>
      <li><%= t('rent.council_overbook') %></li>
    </ul>
    <%= f.association :council, collection: current_user.car_councils %>
  <% end %>

  <% if @terms.present? %>
    <span class="rent terms">
    <%= t('rent.terms_agree') %>
    <%= link_to(document_path(@terms), target: 'blank_p') do %>
      <%= fa_icon('paperclip') %> <%= t('rent.terms') %>.
    <% end %>
    </span>
    <br>
  <% end %>

  <% if @rent.edit?(current_user) %>
    <%= f.button :submit %>
  <% else %>
    <strong><%= t('rent.cannot_edit') %></strong>
  <% end %>
<% end %>
